{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Date$now from \"@babel/runtime-corejs2/core-js/date/now\";\nimport Router from \"next/router\";\nexport const logout = () => {\n  localStorage.removeItem(\"token\");\n  window.localStorage.setItem(\"logout\", _Date$now());\n  Router.push(\"/\");\n};\nexport const login = token => {\n  localStorage.setItem(\"token\", [token]);\n  Router.push(\"/\");\n  localStorage.removeItem(\"logout\");\n};\nexport const VerifyToken = function (token) {\n  // const localStorageToken = localStorage.getItem(\"token\");\n  if (token) {\n    fetch(\"https://beta.stockzoom.com/api-token-verify/\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\"\n      },\n      body: _JSON$stringify({\n        token: token\n      })\n    }).then(response => {\n      if (response.ok) {\n        response.json().then(({\n          token\n        }) => login(token));\n      } else {\n        console.log(\"failed to verify token\");\n        Router.push(\"/login\");\n      }\n    });\n  }\n\n  return token;\n};","map":{"version":3,"sources":["C:\\Users\\Darth Vader\\Desktop\\will_and_skill\\pages\\auth\\auth.js"],"names":["Router","logout","localStorage","removeItem","window","setItem","push","login","token","VerifyToken","fetch","method","headers","body","then","response","ok","json","console","log"],"mappings":";;AAAA,OAAOA,MAAP,MAAmB,aAAnB;AAEA,OAAO,MAAMC,MAAM,GAAG,MAAM;AAC1BC,EAAAA,YAAY,CAACC,UAAb,CAAwB,OAAxB;AACAC,EAAAA,MAAM,CAACF,YAAP,CAAoBG,OAApB,CAA4B,QAA5B,EAAsC,WAAtC;AACAL,EAAAA,MAAM,CAACM,IAAP,CAAY,GAAZ;AACD,CAJM;AAMP,OAAO,MAAMC,KAAK,GAAGC,KAAK,IAAI;AAC5BN,EAAAA,YAAY,CAACG,OAAb,CAAqB,OAArB,EAA8B,CAACG,KAAD,CAA9B;AACAR,EAAAA,MAAM,CAACM,IAAP,CAAY,GAAZ;AACAJ,EAAAA,YAAY,CAACC,UAAb,CAAwB,QAAxB;AACD,CAJM;AAMP,OAAO,MAAMM,WAAW,GAAG,UAASD,KAAT,EAAgB;AACzC;AACA,MAAIA,KAAJ,EAAW;AACTE,IAAAA,KAAK,CAAC,8CAAD,EAAiD;AACpDC,MAAAA,MAAM,EAAE,MAD4C;AAEpDC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAF2C;AAKpDC,MAAAA,IAAI,EAAE,gBAAe;AACnBL,QAAAA,KAAK,EAAEA;AADY,OAAf;AAL8C,KAAjD,CAAL,CAQGM,IARH,CAQQC,QAAQ,IAAI;AAClB,UAAIA,QAAQ,CAACC,EAAb,EAAiB;AACfD,QAAAA,QAAQ,CAACE,IAAT,GAAgBH,IAAhB,CAAqB,CAAC;AAAEN,UAAAA;AAAF,SAAD,KAAeD,KAAK,CAACC,KAAD,CAAzC;AACD,OAFD,MAEO;AACLU,QAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAnB,QAAAA,MAAM,CAACM,IAAP,CAAY,QAAZ;AACD;AACF,KAfD;AAgBD;;AACD,SAAOE,KAAP;AACD,CArBM","sourcesContent":["import Router from \"next/router\";\r\n\r\nexport const logout = () => {\r\n  localStorage.removeItem(\"token\");\r\n  window.localStorage.setItem(\"logout\", Date.now());\r\n  Router.push(\"/\");\r\n};\r\n\r\nexport const login = token => {\r\n  localStorage.setItem(\"token\", [token]);\r\n  Router.push(\"/\");\r\n  localStorage.removeItem(\"logout\");\r\n};\r\n\r\nexport const VerifyToken = function(token) {\r\n  // const localStorageToken = localStorage.getItem(\"token\");\r\n  if (token) {\r\n    fetch(\"https://beta.stockzoom.com/api-token-verify/\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json; charset=utf-8\"\r\n      },\r\n      body: JSON.stringify({\r\n        token: token\r\n      })\r\n    }).then(response => {\r\n      if (response.ok) {\r\n        response.json().then(({ token }) => login(token));\r\n      } else {\r\n        console.log(\"failed to verify token\");\r\n        Router.push(\"/login\");\r\n      }\r\n    });\r\n  }\r\n  return token;\r\n};\r\n"]},"metadata":{},"sourceType":"module"}